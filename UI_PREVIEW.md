# UI Preview - Version Tracking and Charts

## Historia KosztorysÃ³w (Quote History)

### Before Implementation
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Historia kosztorysÃ³w                      [âœ•]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ â–¼ Projekt Kuchnia                       â”‚   â”‚
â”‚ â”‚   1500.00 zÅ‚                            â”‚   â”‚
â”‚ â”‚   Data utworzenia: 2024-12-07 10:00     â”‚   â”‚
â”‚ â”‚   [Edytuj] [UsuÅ„]                       â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ â–¼ Projekt Kuchnia                       â”‚   â”‚  â† DUPLICATE NAME
â”‚ â”‚   1200.00 zÅ‚                            â”‚   â”‚
â”‚ â”‚   Data utworzenia: 2024-12-06 14:30     â”‚   â”‚
â”‚ â”‚   [Edytuj] [UsuÅ„]                       â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### After Implementation
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Historia kosztorysÃ³w                      [âœ•]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ â–¼ Projekt Kuchnia [2 wersji] 1500.00 zÅ‚â”‚   â”‚  â† VERSION BADGE
â”‚ â”‚   Data utworzenia: 2024-12-07 10:00     â”‚   â”‚
â”‚ â”‚   [Edytuj] [Zobacz wersje] [UsuÅ„]       â”‚   â”‚  â† NEW BUTTON
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â† ONLY LATEST SHOWN
â”‚                                                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ â–¼ Remont Åazienki    2300.00 zÅ‚        â”‚   â”‚  â† NO BADGE (single version)
â”‚ â”‚   Data utworzenia: 2024-12-05 09:15     â”‚   â”‚
â”‚ â”‚   [Edytuj] [UsuÅ„]                       â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Badge Style:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2 wersji   â”‚  Blue (#3b82f6), White text, Rounded
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Button Style:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Zobacz wersje    â”‚  Purple gradient (#8b5cf6 â†’ #7c3aed)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Wersje Modal (Versions Modal)

### After clicking "Zobacz wersje"
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Wersje: Projekt Kuchnia                          [âœ•]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Wersja 2 [Najnowsza]                             â”‚ â”‚  â† GREEN BADGE
â”‚ â”‚ Data utworzenia: 7.12.2024, 10:00:00             â”‚ â”‚
â”‚ â”‚ Data aktualizacji: 7.12.2024, 10:00:00           â”‚ â”‚
â”‚ â”‚ Suma: 1500.00 zÅ‚                                 â”‚ â”‚
â”‚ â”‚                                                   â”‚ â”‚
â”‚ â”‚ [Edytuj tÄ™ wersjÄ™] [UsuÅ„]                        â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Wersja 1                                          â”‚ â”‚
â”‚ â”‚ Data utworzenia: 6.12.2024, 14:30:00             â”‚ â”‚
â”‚ â”‚ Data aktualizacji: 6.12.2024, 14:30:00           â”‚ â”‚
â”‚ â”‚ Suma: 1200.00 zÅ‚                                 â”‚ â”‚
â”‚ â”‚                                                   â”‚ â”‚
â”‚ â”‚ [Edytuj tÄ™ wersjÄ™] [UsuÅ„]                        â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Profile Menu

### After Implementation
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Konto                    â”‚
â”‚ â€¢ ZmieÅ„ login            â”‚
â”‚ â€¢ ZmieÅ„ hasÅ‚o            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Historia                 â”‚
â”‚ â€¢ Historia kosztorysÃ³w   â”‚
â”‚ â€¢ ZakoÅ„czone prace       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Analizy                  â”‚  â† NEW SECTION
â”‚ â€¢ Wykresy i statystyki   â”‚  â† NEW ITEM
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Wyloguj                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Charts Modal (Wykresy i statystyki)

### Full Modal View
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Wykresy i statystyki                                           [âœ•]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                       â”‚
â”‚   Diagram kosztÃ³w wedÅ‚ug kategorii                                   â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚   â”‚                                               â”‚                   â”‚
â”‚   â”‚              â•±â”€â”€â”€â”€â”€â•²                         â”‚                   â”‚
â”‚   â”‚           â•±           â•²                      â”‚                   â”‚
â”‚   â”‚        â•±   Malowanie   â•²   35%              â”‚                   â”‚
â”‚   â”‚       â”‚       35%       â”‚                    â”‚                   â”‚
â”‚   â”‚       â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                    â”‚                   â”‚
â”‚   â”‚       â”‚   Hydraulika    â”‚  25%               â”‚                   â”‚
â”‚   â”‚        â•²      25%      â•±                     â”‚                   â”‚
â”‚   â”‚          â•²â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•±                       â”‚                   â”‚
â”‚   â”‚       Elektryka 20%                          â”‚                   â”‚
â”‚   â”‚       Inne 20%                               â”‚                   â”‚
â”‚   â”‚                                               â”‚                   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                                                                       â”‚
â”‚   Legend:                                                             â”‚
â”‚   ğŸŸ¦ Malowanie  ğŸŸ¥ Hydraulika  ğŸŸ© Elektryka  ğŸŸ§ Inne                â”‚
â”‚                                                                       â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                                       â”‚
â”‚   Wykres zysku wedÅ‚ug kategorii                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚   â”‚ Zysk (zÅ‚)                                    â”‚                   â”‚
â”‚   â”‚ 300 â”¤                                        â”‚                   â”‚
â”‚   â”‚     â”‚                                        â”‚                   â”‚
â”‚   â”‚ 250 â”¤ â–ˆâ–ˆâ–ˆâ–ˆ (Green - Profit)                 â”‚                   â”‚
â”‚   â”‚     â”‚ â–ˆâ–ˆâ–ˆâ–ˆ                                   â”‚                   â”‚
â”‚   â”‚ 200 â”¤ â–ˆâ–ˆâ–ˆâ–ˆ                                   â”‚                   â”‚
â”‚   â”‚     â”‚ â–ˆâ–ˆâ–ˆâ–ˆ                                   â”‚                   â”‚
â”‚   â”‚ 150 â”¤ â–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆ                            â”‚                   â”‚
â”‚   â”‚     â”‚ â–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆ                            â”‚                   â”‚
â”‚   â”‚ 100 â”¤ â–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆ                            â”‚                   â”‚
â”‚   â”‚     â”‚ â–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆ                            â”‚                   â”‚
â”‚   â”‚  50 â”¤ â–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆ                            â”‚                   â”‚
â”‚   â”‚     â”‚ â–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆ                            â”‚                   â”‚
â”‚   â”‚   0 â”¼â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€                â”‚                   â”‚
â”‚   â”‚     â”‚ Mal â”‚ Hyd â”‚ Ele â”‚ Inne                â”‚                   â”‚
â”‚   â”‚ -50 â”¤                   â–ˆâ–ˆâ–ˆâ–ˆ (Red - Loss)   â”‚                   â”‚
â”‚   â”‚     â”‚                   â–ˆâ–ˆâ–ˆâ–ˆ                 â”‚                   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                                                                       â”‚
â”‚   Malowanie: +250 zÅ‚   Hydraulika: +150 zÅ‚                          â”‚
â”‚   Elektryka: +120 zÅ‚   Inne: -50 zÅ‚                                 â”‚
â”‚                                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Modal Width: 1000px (wider than standard 720px)
Charts: Interactive with tooltips on hover
Colors: Green for positive, Red for negative, Various colors for pie
```

## Color Scheme

### Version Badge
- Background: #3b82f6 (Blue)
- Text: #ffffff (White)
- Border-radius: 12px
- Padding: 2px 8px
- Font-size: 12px

### Zobacz wersje Button
- Background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%) (Purple)
- Text: #ffffff (White)

### Najnowsza Badge
- Background: #16a34a (Green)
- Text: #ffffff (White)

### Charts
- Pie Chart Colors: #3b82f6, #ef4444, #10b981, #f59e0b, #8b5cf6, #ec4899, #14b8a6, #f97316, #6366f1, #84cc16
- Profit Bars: rgba(22, 163, 74, 0.7) (Green with transparency)
- Loss Bars: rgba(220, 38, 38, 0.7) (Red with transparency)

## Interaction Flow

### Creating Versions
1. User creates quote "Projekt Kuchnia" â†’ Saves to history â†’ v1 created
2. User modifies and saves again with same name â†’ v2 created
3. History shows: "Projekt Kuchnia [2 wersji]" with latest data (v2)
4. User clicks "Zobacz wersje" â†’ Modal shows both v1 and v2

### Viewing Charts
1. User clicks Profile â†’ "Wykresy i statystyki"
2. System aggregates data from all quotes
3. Maps category IDs to names
4. Calculates expenses and profits per category
5. Renders pie chart (expenses) and bar chart (profit/loss)
6. User hovers over sections â†’ Tooltips show exact values

## Responsive Behavior

### Mobile (<768px)
- Version badge scales down
- "Zobacz wersje" button remains full-width
- Charts modal scrollable vertically
- Charts maintain aspect ratio
- Touch-friendly tap targets (min 48px height)

### Desktop (>768px)
- Version badge inline with name
- Buttons in row layout
- Charts displayed side-by-side in modal
- Hover interactions enabled

## Accessibility

- All buttons have proper labels
- Modals can be closed with ESC key
- Focus management on modal open/close
- ARIA labels for charts (via Chart.js)
- Color contrast meets WCAG AA standards
- Polish locale for all text and dates

## Performance

- Charts only rendered when modal opened
- Previous chart instances destroyed before new render
- RequestAnimationFrame for smooth rendering
- Efficient data aggregation (single pass)
- Indexed database queries for versions
- Lazy loading of version data

## Edge Cases Handled

âœ… Single version quote: No badge, no "Zobacz wersje" button
âœ… Empty categories: Grouped as "Bez kategorii"
âœ… No data for charts: Alert shown, modal not opened
âœ… Invalid category IDs: Gracefully handled with fallbacks
âœ… Very long quote names: Text truncation with ellipsis
âœ… Many versions: Scrollable modal
